Softlabe - keep focus
=====================

JavaScript SDK для создания кроссплатформенных приложений

------------------
Введение
------------------
Типичная проблема разработки приложения - зоопарк из языков и технологий, а также взаимодействие между ними. Разработчику современного web- или нативного приложения необходимо решить такие задачи:

- разработать хранилище данных,
- разработать серверную часть,
- разработать клиентские web/нативные приложения,
- разработать взаимодействия хранилище <-> сервер <-> клиент,
- поддерживать несколько языков/культур,
- обеспечить высокодоступность, масштабируемость и отказоустойчивость.

Для решения всех этих задач отлично подходит JavaScript - лучший язык для разработки нового продукта. Его достоинства:

 - кроссплатформенность,
 - это единственный язык, который запускается и на серверной, и на клиентской стороне,
 - один из немногих языков, который можно интерпретировать практически на любом современном устройстве без установки дополнительных компонентов (браузер есть даже в современном холодильнике),
 - высокая производительность серверной части (node.js),
 - его знают все web-разработчики,
 - 5-место среди основных языков у разработчиков,
 - 1-место с большим отрывом как второй язык у разработчиков.
 
Причины почему JavaScript еще не стал лидером:

- сложность написания серверной части на JavaScript,
- сложность сопровождения асинхронного кода,
- сложность поиска и поддержки сторонних библиотек,
- распространен только для web-приложений.

Все эти проблемы решает Softlabe SDK.
В нашем SDK мы собрали всё самое необходимое для успешной реализации проекта на JavaScript. Набор компонентов и  паттернов позволит ускорить процесс разработки и упростить сопровождение проекта.

------------------
Основы SDK
------------------

**Full-stack. Pure JavaScript.**

- для написания приложения вы используете только JavaScript/JSON. Больше никакого зоопарка из языков и технологий, единая парадигма для всего приложения,
- повторное использование кода между клиентом и сервером,
- простое взаимодействиe между слоями приложения,
- работа с репозиторием также на языке JavaScript.

**Квазисинхронный код.** Больше никакого ада "callback-ов".  Уникальная разработка - компиляция синхронного кода в асинхронный. Теперь вы можете выполнять любую серверную или клиентскую операцию квазисинхронно:

- вызов серверных методов,
- чтение данных и файлов и другие операции ввода-вывода,
- работа с базой данных.

Все эти операции выполняются без блокировки потока выполнения. 

Подробнее об этом можно прочитать ниже

**Кросс-платформенность.** Написанное приложение запускается в виде web- или мобильного приложения. Для создания элементов управления мы используем родные элементы управления, что позволяет увеличить отзывчивость UI. Используются следующие принципы для создания UI:

 - разделение внешнего вида и логики приложения, 
 - загрузка стилей по определенным условиям (ширина экрана, тип устройства) позволяет настроить внешний вид под конкретное устройство,
 - возможность использовать всю мощь JavaScript для работы со стилями.

Подробнее об этом можно прочитать ниже
 
**Быстрый старт.** Создание приложения не требует от вас никаких лишних действий. Вы можете использовать ваш любимый редактор для написания приложений.

**ООП.** Применение объектно-ориентированного подхода с возможностью множественного наследования.

**AMD.** Асинхронная загрузка модулей позволяет содержать код в структурированном виде, размещая каждый класс в отдельном файле. Это позволяет загрузить приложение целиком или загружать компоненты по требованию для оптимизации скорости загрузки приложения.

**IoC.** В основе нашего SDK лежит принцип инверсии зависимостей. Это позволяет загружать нужные реализации модулей в соответствии c рабочим окружением.
Применение этого принципа позволяет использовать всю мощь модульного тестирования.

**All out of box.** Из коробки доступны все необходимые компонеты для разработки: 

- локализация и интернационализация,
- storage,
- binding,
- unit tests,
- логирование и профилирование,
- AOP и т.д.

**Горизонтальное масштабирование.** Быстрое горизонтальное масштабирование. 

**Утилиты и web-сервисы.** Набор утилит и web-сервисов для создания и развертывания приложений, упрощающий повседневные задачи.

**Размещение.** Помощь в размещении приложений: для серверной части мы предоставляем PasS, для мобильной - генерация установочных файлов.

**Поддержка.** Проект будет поддерживаться выделенной командой разработчиков.

**Лицензия и прайс.** 

Все это и многое другое, что входит в состав Softlabe SDK, позволит разработчикам сфокусироваться на решаемой проблеме, а не на инфраструктуре приложения.

----------
Преобразование асинхронного кода в синхронный
----------
Разработка приложения на JavaScript (NodeJS/Web) требует от разработчика написания асинхронного кода (загрузка файлов и данных, вызов серверных функций, работа с базой данных, загрузка AMD-модулей). Много проблем возникает на месте стыковки синхронного кода с асинхронным, например не работает обработка исключений.

> **INFO:** Некоторые разработчики могут подумать, что нет ничего страшного в написании кода на call-back'ах. Но мы хотим отметить, что это требует от разработчика более высокой профессиональной подготовки, внимательности и аккуратности. Так же мы уверены в том, что применение call-back - это архаичный способ, такой же, как написание кода в C-стиле с обработкой result-code после каждой операции, что может привести к созданию write-only кода.  

Все это приводит к "аду callback-ов".

Сравните 2 функции, выполняющие одно и то же действие - чтение данных из MongoDb:

- с использованием callback-ов
```
function readData(connectionParam, callback) {
    var server = new mongoServer(connectionParam.server.name, connectionParam.server.port, connectionParam.server.additionalParameter);
    var db = new mongoDb(connectionParam.db.name, server, connectionParam.db.additionalParameter);

    db.open(function (err, db) {
        if (err) {
            db.close();
            callback(err);
        } else {
            db.collection('testCollection', function (err, collection) {
                if (err) {
                    db.close();
                    callback(err);
                } else {
                    collection.find(function (err, cursor) {
                        if (err) {
                            db.close();
                            callback(err);
                        } else {
                            cursor.toArray(function (err, data) {
                                if (err) {
                                    callback(err);
                                } else {
                                    callback(undefined, data);
                                }
                                db.close();
                            })
                        }
                    });
                }
            });
        }
    });
}
```
- без использованием callback-ов
```
function readData(connectionParam) {
    var server = new mongoServer(connectionParam.server.name, connectionParam.server.port, connectionParam.server.additionalParameter);
    var db = new mongoDb(connectionParam.db.name, server, connectionParam.db.additionalParameter);

    try {
        db.open();
        return db.collection('testCollection')
            .find()
            .toArray();
    }
    catch (e) {
        throw  e;
    }
    finally {
        db.close();
    }
}
```
Однозначно, писать и отлаживать синхронный код намного легче. Поэтому в основе нашего SDK лежит компиляция синхронного кода в асинхронный. Разработчик пишет синхронный код, а наш компилятор сгенерирует асинхронную версию этого кода + sourcemaps для отладки. Разработчик получает всю мощь асинхронного программирования, используя привычные конструкции синхронного (циклы, обработка исключений, паттерны), и возможность прозрачной отладки приложения.

----------
Кросс-платформенность
----------
Написанный один раз код можно запустить не только как web-приложение в браузере, а и на мобильных платформах и десктопах.

Разработчик использует JSON для декларативного описания интерфейса.

> **INFO:** Для web-приложений разработчик не работает с DOM-элементами напрямую, а использует методы объектов для установки свойств элементов.
> **INFO:** Код снизу намеренно упрощен и не устанавливает всех необходимых свойств.


```
{
    _$module: 'softlabe/core/src/shared/view/layout/stack',
    orientation: orientation.vertical,
    items: [
    {
        _$module: 'softlabe/core/src/shared/view/layout/stack',
        orientation: orientation.vertical,
        items: [
            {
                _$module:'softlabe/core/src/shared/view/text',
                _id:'txtFirstName',
                content:'First name'
            },
            {
                _$module:'softlabe/core/src/shared/view/text',
                _id:'tbFirstName',
                content:'First name'
            },
        ]
    }
    ]
}
```
В арсенале разработчика так же присутствует возможность декларативного описания стилей
```
'softlabe/core/src/shared/view/text': {
    background:{
        color:0x00000000
    }
},
```
Разработчики могут задавать стили со специфическими условиями, например стили кнопок для iOS устройств. Для этого лишь нужно настроить IoC-контейнер. 


Web-приложение:

![Web-приложение][1]

Нативное приложение:

![нативное-приложение][2]

Для создания UI используем нативные элементы управления, что позволяет увеличить отзывчивость UI.



----------
Заключение
----------
Что это даст бизнесу:

- возможность выпуска продукта для web и мобильной платформы,
- расширение каналов продвижения и упрощение дистрибуции приложений,
- уменьшение времени и стоимости разработки и сопровождения в ~3 раза,
- уменьшение стоимости содержания IT-инфраструктуры,
- возможность легкого и быстрого масштабирования,
- снижение требований к квалификации разработчиков и расширение рынка потенциальных работников.

Что это даст разработчикам:

- единый язык и технологию для разработки,
- легкость сопровождения кода,
- возможность сфокусироваться на проблеме, а не на инфраструктуре.

К тому же, те разработчики, которые хотят сменить свой основной язык (PHP, Python, Java, .NET), смогут сделать это с невероятной легкостью.


  [1]: https://downloader.disk.yandex.ru/preview/2fcd03eaf651c05ee73fe636086cedf9/mpfs/sUoz4_orD-Z7b7-wWK-peHYg535euBzwfB576NITSz-CfT5V8BHfBrbnFYHpWqU3Hi4exp2H6n4P3xL4WYWCyw%3D%3D?uid=0&filename=Untitleddrawingjpg&disposition=inline&hash=&limit=0&content_type=image%2Fjpeg&size=XXL&crop=0
  
  [2]: https://downloader.disk.yandex.ru/preview/841cf109f55c50849ac5808059838208/mpfs/-OhS_rgg8QBvRj2GzTXV1y-DBTDFITttX9xone8Haj5tCFBWlzQA-HLVOUfMfTuabNnZzJw22QdNnhBF_RO5Jg==?uid=0&filename=Untitleddrawing1jpg&disposition=inline&hash=&limit=0&content_type=image/jpeg&size=XXL&crop=0
